{% extends 'legal_db/base.html' %}

{% block body_content %}
<section class="hero scholarship padding-horizontal-xxl padding-vertical-large">
  {% include "legal_db/partials/_breadcrumb.html" %}
  <h2>Scholarship</h2>
  <div class="contribute">
    <article class="card entry-post link no-border">
      <a href="#" class="has-background-dark-turquoise">
        <span class="card-content has-bottom-link">
          <h2 class="card-title">Contribute</h2>
          <span class="content">Do you want to submit a scholarly article to the database?</span>
          <strong class="link-arrow">Submit an article <i class="icon chevron-right"></i></strong>
        </span>
      </a>
    </article>
  </div>
  <p class="padding-vertical-small body-big">Here you will find information on academic scholarship that addresses Creative Commons legal tools or the legal issues that affect them. Click on the link to the article for more details.</p>
</section>

<div class="padding-horizontal-xxl padding-vertical-normal">

  <section class="columns is-vcentered margin-vertical-big">
    <div class="column">
      <div class="control has-icons-left">
        <input class="input" type="text" placeholder="Search for..."/>
        <span class="icon is-left"><i class="icon search"></i></span>
      </div>
    </div>
    <div class="column">
      <strong id="tags-filter" class="tags-filter margin-left-normal">
        <span id="tags-hide">Hide topic filters <i class="icon chevron-up"></i></span>
        <span id="tags-show" class="is-hidden">Show topic filters <i class="icon chevron-down"></i></span>
      </strong>
    </div>
  </section>

  <section id="tags" aria-expanded="true">
  {% for tag in tags %}
    <button class="button tag scholarship margin-right-small margin-vertical-smaller">
      {{ tag }}
    </button>
  {% endfor %}
  </section>

  <section class="margin-vertical-big table-container">
    <table class="table is-bordered is-striped is-fullwidth">
      <thead>
        <tr>
          <th>Title</th>
          <th>Author(s)</th>
          <th>License</th>
          <th>Year of publication</th>
        </tr>
      </thead>
      <tbody>
      {% for sch in scholarships %}
        <tr>
          <td><a href="{% url 'scholarship_detail' sch.id %}" class="has-text-dark-slate-blue">{{ sch.title }}</a></td>
          <td>{{ sch.authors }}</td>
          <td>{{ sch.license }}</td>
          <td class="number-cell">{{ sch.publication_year }}</td>
        </tr>
      {% endfor %}
      </tbody>
    </table>
  </section>
</div>
{% endblock %}

{% block js_content %}
<script>
  const tagsToggle = document.getElementById('tags-filter'),
        tagsSection = document.getElementById('tags'),
        tagsShow = document.getElementById('tags-show'),
        tagsHide = document.getElementById('tags-hide');

  tagsToggle.addEventListener('click', () => {
      tagsSection.classList.toggle('is-hidden');
      tagsShow.classList.toggle('is-hidden');
      tagsHide.classList.toggle('is-hidden');
      if (tagsSection.classList.contains('is-hidden')) {
          tagsSection.setAttribute('aria-expanded', false);

      } else {
          tagsSection.setAttribute('aria-expanded', true);
      }
  });

  const tags = document.querySelectorAll('.tag');
  tags.forEach(tag => {
    tag.addEventListener('click', () => {
        tag.classList.toggle('selected');
    })
  });
</script>
{% endblock %}
